<div class="modal-header">
  <h4 class="modal-title pull-left"> 通知物流专员</h4>
  <div class="pull-right">
    <button type="button" class="close pull-right" aria-label="Close" (click)="bsModalRef.hide()">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
</div>
<div class="modal-body">
  <div class="panel panel-default">
    <div class="panel-body" style="overflow-y: auto;overflow-x:hidden;" [ngStyle]="{'max-height':(settings.bodyHeight-212)+'px'}">
      <div class="form-group mb fieldsetdnn col-sm-12 col-md-12">
        <label class="col-sm-3 control-label required">起始地</label>
        <div class="col-sm-9">
          <!-- <input type="text" placeholder="请输入起始地" [(ngModel)]="wuliunotice['startarea']" class="form-control"
            required (blur)="selectedenddest1(wuliunotice['startarea'])" /> -->
          <p-autoComplete placeholder="请输入详细地址" name="addr" [(ngModel)]="wuliunotice['startarea']"
            [suggestions]="results" (completeMethod)="searchplace($event)" 
            (onSelect)="selectedenddest1(wuliunotice['startarea'])"
            [style]="{'width':'85%'}" [inputStyle]="{'width':'85%'}" field="name" 
            dataKey="id" [dropdown]="false">
           </p-autoComplete>

        </div>
      </div>
      <div class="form-group mb fieldsetdnn col-sm-12 col-md-12">
        <label class="col-sm-3 control-label"> </label>
        <div class="col-sm-9 col-xs-12" style="padding-left:0;">
          <div class="col-sm-3 col-xs-12">
            <p-dropdown [options]="provinces1" [(ngModel)]="wuliunotice['startprovinceid']"
              [style]="{'width':'100%','font-size':'15px'}" [placeholder]="'请选择省份'" (onChange)="getcity1()">
            </p-dropdown>
          </div>
          <div class="col-sm-3 col-xs-12" style="padding-left:15px;">
            <p-dropdown [options]="citys1" [(ngModel)]="wuliunotice['startcityid']"
              [style]="{'width':'100%','font-size':'15px'}" [placeholder]="'请选择市'" (onChange)="getcounty1()">
            </p-dropdown>
          </div>
          <div class="col-sm-3 col-xs-12" style="padding-left:15px;">
            <p-dropdown [options]="countys1" [(ngModel)]="wuliunotice['startcountyid']"
              [style]="{'width':'100%','font-size':'15px'}" [placeholder]="'请选择县'">
            </p-dropdown>
          </div>
          <div class="col-sm-3 col-xs-12" style="padding-left:15px;">
            <p-dropdown [options]="cangkus" [(ngModel)]="wuliunotice['startcangkuid']" [filter]="true" filterBy="label,value.name"
            [style]="{'width':'100%','font-size':'15px'}" [placeholder]="'请选择仓库'">
            </p-dropdown>
          </div>
        </div>
      </div>
      <div class="form-group mb fieldsetdnn col-sm-12 col-md-12">
        <label class="col-sm-3 control-label required">卸货地址</label>
        <div class="col-sm-9">
          <!-- <input type="text" placeholder="请输入详细地址" [(ngModel)]="wuliunotice['enddest']" class="form-control"
            required (blur)="selectedenddest(wuliunotice['enddest'])" /> -->
          <p-autoComplete placeholder="请输入详细地址" name="addr" [(ngModel)]="wuliunotice['enddest']"
            [suggestions]="results" (completeMethod)="searchplace($event)" 
            (onSelect)="selectedenddest(wuliunotice['enddest'])"
            [style]="{'width':'85%'}" [inputStyle]="{'width':'85%'}" field="name" 
            dataKey="id" [dropdown]="false">
           </p-autoComplete>
        </div>
      </div>
      <div class="form-group mb fieldsetdnn col-sm-12 col-md-12">
        <label class="col-sm-3 control-label"> </label>
        <div class="col-sm-9 col-xs-12" style="padding-left:0;">
          <div class="col-sm-3">
            <p-dropdown [options]="provinces" [(ngModel)]="wuliunotice['provinceid']"
              [style]="{'width':'100%','font-size':'15px'}" [placeholder]="'请选择省份'" (onChange)="getcity2()">
            </p-dropdown>
          </div>
          <div class="col-sm-3" style="padding-left:15px;">
            <p-dropdown [options]="citys" [(ngModel)]="wuliunotice['cityid']"
              [style]="{'width':'100%','font-size':'15px'}" [placeholder]="'请选择市'" (onChange)="getcounty2()">
            </p-dropdown>
          </div>
          <div class="col-sm-3" style="padding-left:15px;">
            <p-dropdown [options]="countys" [(ngModel)]="wuliunotice['countyid']"
              [style]="{'width':'100%','font-size':'15px'}" [placeholder]="'请选择县'">
            </p-dropdown>
          </div>
          <div class="col-sm-3 col-xs-12" style="padding-left:15px;">
            <p-dropdown [options]="cangkus" [(ngModel)]="wuliunotice['endcangkuid']" [filter]="true" filterBy="label,value.name"
            [style]="{'width':'100%','font-size':'15px'}" [placeholder]="'请选择仓库'">
            </p-dropdown>
          </div>
        </div>
      </div>
      <div class="form-group mb fieldsetdnn col-sm-12 col-md-12">
        <label class="col-sm-3 control-label required">运输类型</label>
        <div class="col-sm-9">
          <p-dropdown [options]="transporttype" [(ngModel)]="wuliunotice['transporttype']"
            [style]="{'width':'100%'}">
          </p-dropdown>
        </div>
      </div>

      <div class="form-group mb fieldsetdnn col-sm-12 col-md-12">
        <label class="col-sm-3 control-label required">物流专员</label>
        <div class="col-sm-9">
          <wisk-usersearch [(user)]="cuser" [placeholder]="'输入物流专员名称'"></wisk-usersearch>
        </div>
      </div>
      <div class="form-group mb fieldsetdnn col-sm-12 col-md-12">
        <label class="col-sm-3 control-label required">预计发货时间</label>
        <div class="col-sm-9">
          <p-calendar [(ngModel)]="wuliunotice['fahuodate']" placeholder="预计发货时间" [minDate]="newdate"></p-calendar>
        </div>
      </div>
      <div class="form-group mb fieldsetdnn col-sm-12 col-md-12">
        <label class="col-sm-3 control-label required">收货人</label>
        <div class="col-sm-9">
          <input type="text" name="name" [(ngModel)]="wuliunotice['xhlianxiren']" class="form-control">
        </div>
      </div>
      <div class="form-group mb fieldsetdnn col-sm-12 col-md-12">
        <label class="col-sm-3 control-label required">电话</label>
        <div class="col-sm-9">
          <input type="text" name="name" [(ngModel)]="wuliunotice['xhlianxirenphone']" class="form-control">
        </div>
      </div>
      <div class="form-group mb fieldsetdnn col-sm-12 col-md-12">
        <label class="col-sm-3 control-label required">零散发货</label>
        <div class="col-sm-9">
          <label class="radio-inline c-radio">
            <input type="radio" [value]="false" name="ispieces" [(ngModel)]="wuliunotice['ispieces']" />
            <span class="fa fa-circle"></span>否
          </label>
          <label class="radio-inline c-radio">
            <input type="radio" [value]="true" name="ispieces" [(ngModel)]="wuliunotice['ispieces']" />
            <span class="fa fa-circle"></span>是
          </label>
        </div>
      </div>
      <div class="form-group mb fieldsetdnn col-sm-12 col-md-12">
        <label class="col-sm-3 control-label required">是否指定收货签字人</label>
        <div class="col-sm-9">
          <label class="radio-inline c-radio">
            <input type="radio" [value]="false" name="isshouhuosign" [(ngModel)]="wuliunotice['isshouhuosign']" />
            <span class="fa fa-circle"></span>否
          </label>
          <label class="radio-inline c-radio">
            <input type="radio" [value]="true" name="isshouhuosign" [(ngModel)]="wuliunotice['isshouhuosign']" />
            <span class="fa fa-circle"></span>是
          </label>
        </div>
      </div>
      <div class="form-group mb fieldsetdnn col-sm-12 col-md-12" *ngIf="wuliunotice['isshouhuosign']">
        <label class="col-sm-3 control-label">签字人</label>
        <div class="col-sm-9">
          <input type="text" placeholder="签字人" [(ngModel)]="wuliunotice['signuser']" class="form-control" />
        </div>
      </div>
      <div class="form-group mb fieldsetdnn col-sm-12 col-md-12" *ngIf="wuliunotice['isshouhuosign']">
        <label class="col-sm-3 control-label">签字人电话</label>
        <div class="col-sm-9">
          <input type="text" placeholder="签字人电话" [(ngModel)]="wuliunotice['signphone']" class="form-control" />
        </div>
      </div>
      <div class="form-group mb fieldsetdnn col-sm-12 col-md-12">
        <ag-grid-angular [ngStyle]="{'height': (settings.bodyHeight - 604)+'px'}" #agGrid
          style="width: calc(100% + 40px);height:100%;margin:0 -20px;min-height: 70px;" class="ag-blue" [gridOptions]="gridOptions" [rowData]="rowData">
        </ag-grid-angular>
      </div>
      <!-- <div class="row">
        <div class="col-sm-2 text-center">
          <label class="col-sm-12 control-label form-control-static">规格</label>
        </div>
        <div class="col-sm-2 text-center">
          <label class="col-sm-12 control-label form-control-static">订单量</label>
        </div>
        <div class="col-sm-2 text-center">
          <label class="col-sm-12 control-label form-control-static">已报价量</label>
        </div>
        <div class="col-sm-2 text-center">
          <label class="col-sm-12 control-label form-control-static">可报价量</label>
        </div>
        <div class="col-sm-2 text-center">
          <label class="col-sm-12 control-label form-control-static">是否加工</label>
        </div>
        <div class="col-sm-2 text-center">
          <label class="col-sm-12 control-label form-control-static">加工成品规格</label>
        </div>
      </div>
      <div class="row" *ngFor="let item of selectQihuodetWuliubaojia"
        style="border-bottom: 1px solid #cfdbe2;padding:5px 0;">
        <div class="col-sm-3 text-center" style="padding: 0 6px;">
          {{item['guige']}}
        </div>
        <div class="col-sm-3 text-center">
          {{item['weight']}}
        </div>
        <div class="col-sm-3 text-center">
          {{item['sumyibaojia']}}
        </div>
        <div class="col-sm-3 text-center">
          <input style="width:calc(100% - 30px); margin: 0 15px" class="form-control"
            [(ngModel)]="item['baojialiang']" placeholder="请输入可报价量" type="number" [disabled]="this.wuliunotice['datasource']===1||this.wuliunotice['datasource']===5">
        </div>
      </div> -->
    </div>

  </div>
  <div class="form-inline text-center">
    <button type="button" (click)="savenoticewuliuyuan()" class="btn btn-primary btn-large">通知</button>
  </div>
</div>
<!--添加成品规格弹窗-->
<div class="modal" bsModal #addProModal="bs-modal" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel"
  aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" aria-label="Close" (click)="hideaddProModal()">
          <span aria-hidden="true">&times;</span>
        </button>
        <h4 class="modal-title">添加成品规格</h4>
      </div>
      <div class="modal-body">
        <div class="panel panel-default">
          <div class="panel-body">
            <div class="form-group mb fieldsetdnn col-sm-6">
              <label class="col-sm-4 control-label required">长度</label>
              <div class="col-sm-8">
                <input class="form-control" type="text" [(ngModel)]="addPro['length']" placeholder="请输入长度" />
              </div>
            </div>
            <div class="form-group mb fieldsetdnn col-sm-6">
              <label class="col-sm-4 control-label required">宽度</label>
              <div class="col-sm-8">
                <input class="form-control" type="text" [(ngModel)]="addPro['width']" placeholder="请输入宽度" />
              </div>
            </div>
            <div class="form-group mb fieldsetdnn col-sm-6">
              <label class="col-sm-4 control-label required">厚度</label>
              <div class="col-sm-8">
                <input class="form-control" type="text" [(ngModel)]="addPro['houdu']" placeholder="请输入厚度" />
              </div>
            </div>
            <div class="form-group mb fieldsetdnn col-sm-6">
              <label class="col-sm-4 control-label required">加工类型</label>
              <div class="col-sm-8">
                <p-dropdown [options]="types" [(ngModel)]="addPro['jgtype']" placeholder="请选择加工类型" [filter]="true"
                    [style]="{'width': '100%','font-size':'15px'}"></p-dropdown>
              </div>
            </div>
            <div class="form-group mb fieldsetdnn col-sm-6">
              <label class="col-sm-4 control-label required">单卷量</label>
              <div class="col-sm-8">
                <input type="text" placeholder="请输入单卷量" [(ngModel)]="addPro['weight']" class="form-control" />
              </div>
            </div>
            <div class="form-group mb fieldsetdnn col-sm-12" *ngIf="slitlist.length">
              <div class="col-sm-2 text-center">
                <label class="col-sm-12 control-label form-control-static">长度</label>
              </div>
              <div class="col-sm-2 text-center">
                <label class="col-sm-12 control-label form-control-static">宽度</label>
              </div>
              <div class="col-sm-2 text-center">
                <label class="col-sm-12 control-label form-control-static">厚度</label>
              </div>
              <div class="col-sm-2 text-center">
                <label class="col-sm-12 control-label form-control-static">加工类型</label>
              </div>
              <div class="col-sm-2 text-center">
                <label class="col-sm-12 control-label form-control-static">单卷量</label>
              </div>
              <div class="col-sm-2 text-center">
                <label class="col-sm-12 control-label form-control-static">操作</label>
              </div>
            </div>
            <div class="form-group mb fieldsetdnn col-sm-12" *ngIf="slitlist.length">
              <div *ngFor="let item of slitlist;let i = index">
                <div class="col-sm-2 text-center">{{item['length']}}</div>
                <div class="col-sm-2 text-center">{{item['width']}}</div>
                <div class="col-sm-2 text-center">{{item['houdu']}}</div>
                <div class="col-sm-2 text-center">{{item['jgtype']}}</div>
                <div class="col-sm-2 text-center">{{item['weight']}}</div>
                <div class="col-sm-2 text-center">
                  <a (click)="delitem(i)">删除</a>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="form-inline text-center">
          <button type="button" (click)="addproductdet()" class="btn btn-primary btn-large">保存</button>
        </div>
      </div>
    </div>
  </div>
</div>

