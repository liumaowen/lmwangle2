<div class="content-heading">
  <em class="fa fa-book"></em> 加工任务单
  <div class="pull-right">
    <button *ngIf="showbutton['imp']" type="button" (click)="removeDet()"
      class="btn btn-info btn-sm margin-top-bottom-25">批量删除明细</button>
    <button *ngIf="showbutton['imp']" type="button" (click)="openmodify()"
      class="btn btn-info btn-sm margin-top-bottom-25">修改</button>
    <button type="button" *ngIf="showbutton['imp']" (click)="deletetask()" class="btn btn-sm margin-top-bottom-25"
      style="background-color:red;border-color:red;color:#ffffff;">删除</button>
    <button *ngIf="showbutton['imp']" type="button" (click)="basematerialImp()"
      class="btn btn-info btn-sm margin-top-bottom-25">基料引入</button>
    <!-- <button *ngIf="tasklist['producemode']===3 && !tasklist['isv']" type="button" (click)="importdet()"
      class="btn btn-info btn-sm margin-top-bottom-25">销售明细引入</button> -->
    <button *ngIf="showbutton['imp']" type="button" (click)="submit()"
      class="btn btn-info btn-sm margin-top-bottom-25">提交审核</button>
    <!--<button *ngIf="showbutton['verify']&&!isweishi" type="button" (click)="refusverify()"
      class="btn btn-info btn-sm margin-top-bottom-25">拒绝审核</button>
    <button *ngIf="showbutton['verify']&&!isweishi" type="button" (click)="verifytask()"
      class="btn btn-info btn-sm margin-top-bottom-25">审核</button>-->
    <button *ngIf="showbutton['qishen']&&!tasklist['isentrust']" type="button" (click)="qishen()"
      class="btn btn-info btn-sm margin-top-bottom-25">弃审</button>
    <button *ngIf="showbutton['isentrust']" type="button" (click)="processfinished()"
      class="btn btn-info btn-sm margin-top-bottom-25">加工完成</button>
    <button type="button" (click)="reload()" class="btn btn-info btn-sm margin-top-bottom-25">生成PDF</button>
    <button type="button" (click)="print()" class="btn btn-info btn-sm margin-top-bottom-25">打印预览</button>
  </div>
</div>
<div class="panel panel-default wis-auto">
  <div class="row fieldsetdnn">
    <div class=" col-lg-3 col-md-6 ">
      <div class="row">
        <div class="col-md-4 col-xs-6 form-control-static">任务单号:</div>
        <div class="col-md-8 col-xs-6 form-control-static">{{tasklist['billno']}}</div>
      </div>
    </div>
    <div class=" col-lg-3 col-md-6 ">
      <div class="row">
        <div class="col-md-4 col-xs-6 form-control-static">合同单号:</div>
        <div class="col-md-8 col-xs-6 form-control-static">{{tasklist['salebillno']}}</div>
      </div>
    </div>
    <div class=" col-lg-3 col-md-6 ">
      <div class="row">
        <div class="col-md-4 col-xs-6 form-control-static">制单时间:</div>
        <div class="col-md-8 col-xs-6 form-control-static">{{tasklist['cdate']}}</div>
      </div>
    </div>
    <div class=" col-lg-3 col-md-6 ">
      <div class="row">
        <div class="col-md-4 col-xs-5 form-control-static">加工交期:</div>
        <div class="col-md-6 col-xs-5 form-control-static">{{tasklist['jiaoqi']}}</div>
        <a class="col-md-2 col-xs-2 form-control-static" (click)="showdate()" *ngIf="!showbutton['qishen']">修改</a>
      </div>
    </div>
  </div>
  <div class="row fieldsetdnn">
    <div class=" col-lg-3 col-md-6 ">
      <div class="row">
        <div class="col-md-4 col-xs-6 form-control-static">制单人:</div>
        <div class="col-md-8 col-xs-6 form-control-static">{{tasklist['cuser']['realname']}}</div>
      </div>
    </div>
    <div class=" col-lg-3 col-md-6 ">
      <div class="row">
        <div class="col-md-4 col-xs-6 form-control-static">联系电话:</div>
        <div class="col-md-8 col-xs-6 form-control-static">{{tasklist['phone']}}</div>
      </div>
    </div>
    <div class=" col-lg-3 col-md-6 ">
      <div class="row">
        <div class="col-md-4 col-xs-6 form-control-static">仓库:</div>
        <div class="col-md-8 col-xs-6 form-control-static">{{tasklist['cangkuname']}}</div>
      </div>
    </div>
    <!-- <div class=" col-lg-3 col-md-6 ">
      <div class="row">
        <div class="col-md-4 col-xs-6 form-control-static">加工费:</div>
        <div class="col-md-8 col-xs-6 form-control-static">{{tasklist['fee']}}</div>
      </div>
    </div> -->
    <div class=" col-lg-3 col-md-6 ">
        <div class="row">
          <div class="col-md-4 col-xs-6 form-control-static">是否保留原标签:</div>
          <div class="col-md-8 col-xs-6 form-control-static">{{tasklist['isretain'] ? '是' : '否'}}</div>
        </div>
    </div>
  </div>
  <div class="row fieldsetdnn">

    <div class=" col-lg-3 col-md-6 ">
      <div class="row">
        <div class="col-md-4 col-xs-6 form-control-static">打包带材料:</div>
        <div class="col-md-8 col-xs-6 form-control-static">{{cailiao ? cailiao : '见备注'}}</div>
      </div>
    </div>
    <div class=" col-lg-3 col-md-6 ">
      <div class="row">
        <div class="col-md-4 col-xs-6 form-control-static">木托数量:</div>
        <div class="col-md-8 col-xs-6 form-control-static">{{tasklist['mutuo']}}</div>
      </div>
    </div>
    <!-- <div class=" col-lg-3 col-md-6 ">
      <div class="row">
        <div class="col-md-4 col-xs-6 form-control-static">钢带数量:</div>
        <div class="col-md-8 col-xs-6 form-control-static">{{tasklist['gangdai'] ? tasklist['gangdai'] : '见备注'}}</div>
      </div>
    </div> -->
    <div class=" col-lg-3 col-md-6 ">
        <div class="row">
          <div class="col-md-4 col-xs-6 form-control-static">是否修边:</div>
          <div class="col-md-8 col-xs-6 form-control-static">{{tasklist['isxiubian'] ? '是' : '否'}}</div>
        </div>
    </div>
    <div class=" col-lg-3 col-md-6 ">
        <div class="row">
            <div class="col-md-4 col-xs-6 form-control-static">包装方式:</div>
            <div class="col-md-8 col-xs-6 form-control-static">{{tasklist['packagetype']}}</div>
        </div>
    </div>
</div>
<div class="row fieldsetdnn">
    <div class=" col-lg-3 col-md-6 ">
        <div class="row">
            <div class="col-md-4 col-xs-6 form-control-static">卷内径:</div>
            <div class="col-md-8 col-xs-6 form-control-static">{{tasklist['neijing']}}</div>
        </div>
    </div>
    <div class=" col-lg-3 col-md-6 ">
      <div class="row">
        <div class="col-md-4 col-xs-6 form-control-static">是否审核:</div>
        <div class="col-md-8 col-xs-6 form-control-static">{{tasklist['isv'] | isTranslated}}</div>
      </div>
    </div>
    <div class=" col-lg-3 col-md-6 ">
        <div class="row">
            <div class="col-md-4 col-xs-6 form-control-static">审核日期:</div>
            <div class="col-md-8 col-xs-6 form-control-static">{{tasklist['vdate']}}</div>
        </div>
    </div>
    <div class=" col-lg-3 col-md-6 ">
        <div class="row">
            <div class="col-md-4 col-xs-6 form-control-static">加工模式:</div>
            <div class="col-md-8 col-xs-6 form-control-static">{{tasklist['producemode'] | producemode}}</div>
        </div>
    </div>
    </div>
    <div class="row fieldsetdnn">
      <div class=" col-lg-3 col-md-6 " >
        <div class="row">
            <div class="col-md-4 col-xs-6 form-control-static">备注:</div>
            <div class="col-md-8 col-xs-6 form-control-static">
              <input type="text" placeholder="请输入备注" [(ngModel)]="tasklist['beizhu']" (blur)="modifybeizhu(tasklist)"
                class="form-control" [disabled]="tasklist['isv']" />
            </div>
        </div>
      </div>
      <div class=" col-lg-3 col-md-6 ">
        <div class="row">
          <div class="col-md-4 col-xs-6 form-control-static">是否为临时仓库:</div>
          <div class="col-md-8 col-xs-6 form-control-static">{{tasklist['islinshicangku'] | islinshicangku}}</div>
        </div>
      </div>
      <div class=" col-lg-3 col-md-6 " *ngIf="tasklist['islinshicangku']">
        <div class="row">
          <div class="col-md-4 col-xs-6 form-control-static">结算方式:</div>
          <div class="col-md-8 col-xs-6 form-control-static">{{tasklist['jiesuanmould'] | jiesuanmould}}</div>
        </div>
      </div>
      <div class=" col-lg-3 col-md-6 " *ngIf="tasklist['fee']">
        <div class="row">
            <div class="col-md-4 col-xs-6 form-control-static">加工费:</div>
            <div class="col-md-8 col-xs-6 form-control-static">{{tasklist['fee']}}</div>
        </div>
      </div>
    </div>
</div>
<ag-grid-angular [ngStyle]="{'height': (settings.bodyHeight - 342)+'px'}" #agGrid class="ag-blue wis-auto"
  [gridOptions]="gridOptions">
</ag-grid-angular>
<toaster-container></toaster-container>
<div class="modal" bsModal #createModal="bs-modal" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel"
  aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" aria-label="Close" (click)="hidecreatemodal()">
          <span aria-hidden="true">&times;</span>
        </button>
        <h4 class="modal-title">修改</h4>
      </div>
      <div class="modal-body">
        <div class="panel panel-default">
          <div class="panel-body">
            <div class="form-group mb fieldsetdnn col-sm-12 col-md-6">
              <label class="col-sm-3 control-label">包装方式</label>
              <div class="col-sm-9">
                <p-dropdown [options]="packages" [(ngModel)]="modifytask['packagetype']"
                  [style]="{'width':'calc(100%)'}" [placeholder]="'请选择包装方式'"></p-dropdown>
              </div>
            </div>
            <div class="form-group mb fieldsetdnn col-sm-12 col-md-6">
              <label class="col-sm-3 control-label">卷内径</label>
              <div class="col-sm-9">
                <p-dropdown [options]="neijings" [(ngModel)]="modifytask['neijing']" [style]="{'width':'calc(100%)'}"
                  [placeholder]="'请选择卷内径'"></p-dropdown>
              </div>
            </div>
            <!-- <div class="form-group mb fieldsetdnn col-sm-12 col-md-6">
              <label class="col-sm-3 control-label">加工费</label>
              <div class="col-sm-9">
                <input type="text" placeholder="请输入加工费" class="form-control" [(ngModel)]="modifytask['fee']" />
              </div>
            </div> -->
            <div class="form-group mb fieldsetdnn col-sm-12 col-md-6">
              <label class="col-sm-3 control-label">联系电话</label>
              <div class="col-sm-9">
                <input type="text" placeholder="请输入联系电话" class="form-control" [(ngModel)]="modifytask['phone']" />
              </div>
            </div>
            <!-- <div class="form-group mb fieldsetdnn col-sm-12 col-md-6">
              <label class="col-sm-3 control-label">加工交期</label>
              <div class="col-sm-5">
                <p-calendar [(ngModel)]="start" placeholder="加工交期" [minDate]="mindate" (onSelect)="selectstart()"></p-calendar>
              </div>
              <div class="col-sm-4">
                <p-dropdown [options]="am_pms" [(ngModel)]="am_pm" [style]="{'width':'calc(100%)'}"></p-dropdown>
              </div>
            </div> -->
            <div class="form-group mb fieldsetdnn col-sm-12 col-md-6">
              <label class="col-sm-3 control-label">盖章单位</label>
              <div class="col-sm-9">
                <p-dropdown [options]="companyIsWiskind" [(ngModel)]="modifytask['sellerid']"
                  [style]="{'width':'100%','font-size':'15px'}" [filter]="true" filterBy="label,value.name">
                </p-dropdown>
              </div>
            </div>
            <div class="form-group mb fieldsetdnn col-sm-12 col-md-6">
              <label class="col-sm-3 control-label">木托数量</label>
              <div class="col-sm-9">
                <input type="number" placeholder="请输入木托数量" class="form-control" [(ngModel)]="modifytask['mutuo']" />
              </div>
            </div>
            <!-- <div class="form-group mb fieldsetdnn col-sm-12 col-md-6">
              <label class="col-sm-3 control-label">钢带数量</label>
              <div class="col-sm-9">
                <input type="number" placeholder="可不填" class="form-control" [(ngModel)]="modifytask['gangdai']" />
              </div>
            </div> -->
            <div class="form-group mb fieldsetdnn col-sm-12 col-md-6" style="padding: 9.5px 30px;">
              <label class="col-sm-3 control-label">修边</label>
              <div class="col-sm-9">
                <label class="radio-inline c-radio">
                  <input id="inlineradio1" type="radio" name="xiubin-radio" [value]="true" [(ngModel)]="modifytask['isxiubian']" />
                  <span class="fa fa-circle"></span>是
                </label>
                <label class="radio-inline c-radio">
                  <input id="inlineradio2" type="radio" name="xiubain-radio" [value]="false" [(ngModel)]="modifytask['isxiubian']" />
                  <span class="fa fa-circle"></span>否
                </label>
              </div>
            </div>
            <div class="form-group mb fieldsetdnn col-sm-12 col-md-6">
              <label class="col-sm-3 control-label">保留原标签</label>
              <div class="col-sm-9">
                <label class="radio-inline c-radio">
                  <input id="inlineradio1" type="radio" name="label-radio" [value]="true" [(ngModel)]="modifytask['isretain']" />
                  <span class="fa fa-circle"></span>是
                </label>
                <label class="radio-inline c-radio">
                  <input id="inlineradio2" type="radio" name="label-radio" [value]="false" [(ngModel)]="modifytask['isretain']" />
                  <span class="fa fa-circle"></span>否
                </label>
              </div>
            </div>
            <div class="form-group mb fieldsetdnn col-sm-12  col-md-6">
              <label class="col-sm-3 control-label">打包带材料</label>
              <div class="col-sm-9">
                <p-dropdown [options]="types" [(ngModel)]="modifytask['cailiao']" [style]="{'width':'100%'}"></p-dropdown>
              </div>
            </div>
            <div *ngIf="modifytask['cailiao'] === '2'" class="form-group mb fieldsetdnn col-sm-12 col-md-6">
              <label class="col-sm-3 control-label">其他打包带材料</label>
              <div class="col-sm-9">
                <input type="text" [(ngModel)]="modifytask['cailiaobeizhu']" class="form-control" />
              </div>
            </div>
          </div>
        </div>
        <div class="form-inline text-center">
          <button type="button" (click)="modify()" class="btn btn-primary btn-large">修改</button>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="modal" bsModal #dateModal="bs-modal" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel"
  aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" aria-label="Close" (click)="hidedatemodal()">
          <span aria-hidden="true">&times;</span>
        </button>
        <h4 class="modal-title">修改</h4>
      </div>
      <div class="modal-body">
        <div class="panel panel-default">
          <div class="panel-body">
            <div class="form-group mb fieldsetdnn col-sm-12 col-md-6">
              <label class="col-sm-3 control-label">加工交期</label>
              <div class="col-sm-5">
                <p-calendar [(ngModel)]="start" placeholder="加工交期" [minDate]="mindate" (onSelect)="selectstart()">
                </p-calendar>
              </div>
              <div class="col-sm-4">
                <p-dropdown [options]="am_pms" placeholder="请选择时间段" [(ngModel)]="am_pm"
                  [style]="{'width':'calc(100%)'}"></p-dropdown>
              </div>
            </div>
          </div>
        </div>
        <div class="form-inline text-center">
          <button type="button" (click)="modifydate()" class="btn btn-primary btn-large">修改</button>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="modal" bsModal #yaoqiuModal="bs-modal" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel"
  aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" aria-label="Close" (click)="hideyaoqiumodal()">
          <span aria-hidden="true">&times;</span>
        </button>
        <h4 class="modal-title">修改</h4>
      </div>
      <div class="modal-body">
        <div class="panel panel-default">
          <div class="panel-body">
            <div class="form-group mb fieldsetdnn col-sm-12 col-md-12">
              <label class="col-sm-3 control-label">打包要求</label>
              <div class="col-sm-12">
                <textarea name="msg" id="" cols="30" rows="3" [(ngModel)]="modifytaskyaoqiu['yaoqiu']"
                  placeholder="请输入打包要求" style="width:100%;"></textarea>
              </div>
            </div>
          </div>
        </div>
        <div class="form-inline text-center">
          <button type="button" (click)="modifyYaoqiu()" class="btn btn-primary btn-large">修改</button>
        </div>
      </div>
    </div>
  </div>
</div>
