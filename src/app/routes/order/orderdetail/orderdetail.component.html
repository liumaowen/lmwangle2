<div class="content-heading">
  <em class="fa fa-book"></em> 线上订单
  <div class="pull-right wide-show">
    <button type="button" (click)="save()"
      class="btn btn-info btn-sm margin-top-bottom-25" *ngIf="flag['showbutton']">加工要求</button>
    <button type="button" (click)="showjiagong()"
      class="btn btn-info btn-sm margin-top-bottom-25" *ngIf="flag['showbutton']">加工明细</button>
    <button type="button" (click)="submitVerify()"
      class="btn btn-info btn-sm margin-top-bottom-25" *ngIf="flag['showbutton']">提交</button>
    <button type="button" (click)="print()" class="btn btn-info btn-sm margin-top-bottom-25">打印预览</button>
    <button *ngIf="flag['fin']" type="button" (click)="finish(order['id'],order['version'])"
      class="btn btn-sm margin-top-bottom-25"
      style="background-color:#FF7F24;border-color:#FF7F24;color:#ffffff;"><span>合同撤销</span></button>
    <span *NgOpera="242">
      <button type="button" (click)="ordermodalchangeshow()" class="btn btn-info btn-sm margin-top-bottom-25">生成PDF</button>
    </span>
    <span *NgOpera="242">
      <button *ngIf="order['producestatus']!=='委托加工'" type="button" (click)="modifytype()" class="btn btn-info btn-sm margin-top-bottom-25">自提改转货权</button>
      <!-- <button class="btn btn-info btn-bloc" style="background-color:red;border-color:red;color:#ffffff;" type="button"
      (click)="deleteorderdet()">货物明细批量删除</button>  -->
    </span>
  </div>
  <div class="pull-right narrow-show">
    <div class="btn-group" dropdown placement="bottom right">
      <button dropdownToggle type="button" class="btn btn-info dropdown-toggle">菜单
        <span class="caret"></span>
      </button>
      <ul *dropdownMenu class="dropdown-menu dropdown-menu-right" role="menu">
        <li role="menuitem" *ngIf="flag['showbutton']">
          <a class="dropdown-item" (click)="save()">加工要求</a>
        </li>
        <li class="divider dropdown-divider" *ngIf="flag['showbutton']"></li>
        <li role="menuitem" *ngIf="flag['showbutton']">
          <a class="dropdown-item" (click)="showjiagong()">加工明细</a>
        </li>
        <li class="divider dropdown-divider" *ngIf="flag['showbutton']"></li>
        <li role="menuitem" *ngIf="flag['showbutton']">
          <a class="dropdown-item" (click)="submitVerify()">提交</a>
        </li>
        <li class="divider dropdown-divider" *ngIf="flag['showbutton']"></li>
        <li role="menuitem">
          <a class="dropdown-item" (click)="print()">打印预览</a>
        </li>
        <li class="divider dropdown-divider"></li>
        <li role="menuitem" *ngIf="flag['fin']">
          <a class="dropdown-item" (click)="finish(order['id'],order['version'])">合同撤销</a>
        </li>
        <li class="divider dropdown-divider" *ngIf="flag['fin']"></li>
        <li role="menuitem" *NgOpera="242">
          <a class="dropdown-item" (click)="ordermodalchangeshow()">生成PDF</a>
        </li>
        <li class="divider dropdown-divider" *NgOpera="242"></li>
        <li role="menuitem" *NgOpera="242">
          <a class="dropdown-item" *ngIf="order['producestatus']!=='委托加工'" (click)="modifytype()">自提改转货权</a>
        </li>
        <li class="divider dropdown-divider" *NgOpera="242"></li>
      </ul>
    </div>
  </div>
</div>

<div class="panel panel-default wis-auto">
  <div class="row fieldsetdnn">
    <div class=" col-lg-3 col-md-6 ">
      <div class="row">
        <div class="col-md-4 col-xs-6 form-control-static">买方单位:</div>
        <div class="col-md-8 col-xs-6 form-control-static">{{order['buyer'] | customer}}</div>
      </div>
    </div>
    <div class=" col-lg-3 col-md-6 ">
      <div class="row">
        <div class="col-md-4 col-xs-6 control-label form-control-static">卖方单位:</div>
        <div class="col-md-8 col-xs-6 form-control-static">
          {{order['seller'] | customer}}
        </div>
      </div>
    </div>
    <div class=" col-lg-3 col-md-6 ">
      <div class="row">
        <div class="col-md-4 col-xs-6 control-label form-control-static">总重量:</div>
        <div class="col-md-8 col-xs-6 form-control-static">
          {{order['tweight']}}吨
        </div>
      </div>
    </div>
    <div class=" col-lg-3 col-md-6 ">
      <div class="row">
        <div class="col-md-4 col-xs-6 control-label form-control-static">总长度:</div>
        <div class="col-md-8 col-xs-6 form-control-static">
          {{order['tlength']}}米
        </div>
      </div>
    </div>
  </div>
  <div class="row fieldsetdnn">
    <div class=" col-lg-3 col-md-6 ">
      <div class="row">
        <div class="col-md-4 col-xs-6 control-label form-control-static">出库费:</div>
        <div class="col-md-8 col-xs-6 form-control-static">
          {{order['chukujine']}}
        </div>
      </div>
    </div>
    <div class=" col-lg-3 col-md-6 ">
      <div class="row">
        <div class="col-md-4 col-xs-6 control-label form-control-static">运费:</div>
        <div class="col-md-8 col-xs-6 form-control-static">
          {{order['yuntprice']}}
        </div>
      </div>
    </div>
    <div class=" col-lg-3 col-md-6 ">
      <div class="row">
        <div class="col-md-4 col-xs-6 control-label form-control-static">货款:</div>
        <div class="col-md-8 col-xs-6 form-control-static">
          {{order['goodsjine'] | number:"1.2-2"}}
        </div>
      </div>
    </div>
    <div class=" col-lg-3 col-md-6 ">
      <div class="row">
        <div class="col-md-4 col-xs-6 control-label form-control-static">金额:</div>
        <div class="col-md-8 col-xs-6 form-control-static">
          {{order['tjine']}}
        </div>
      </div>
    </div>
  </div>

  <div class="row fieldsetdnn">
    <div class=" col-lg-3 col-md-6 ">
      <div class="row">
        <div class="col-md-4 col-xs-6 control-label form-control-static">运送类型:</div>
        <div class="col-md-8 col-xs-6 form-control-static">
          {{order['type'] | orderyunshutype}}
        </div>
      </div>
    </div>
    <div class=" col-lg-3 col-md-6 ">
      <div class="row">
        <div class="col-md-4 col-xs-6 control-label form-control-static">收货人:</div>
        <div class="col-md-8 col-xs-6 form-control-static">
          {{order['addrbak']?order['addrbak']['lianxiren']:''}}
        </div>
      </div>
    </div>
    <div class=" col-lg-3 col-md-6 ">
      <div class="row">
        <div class="col-md-4 col-xs-6 control-label form-control-static">手机号:</div>
        <div class="col-md-8 col-xs-6 form-control-static">
          {{order['addrbak']?order['addrbak']['phone']:''}}
        </div>
      </div>
    </div>
    <div class=" col-lg-3 col-md-6 ">
      <div class="row">
        <div class="col-md-4 col-xs-6 control-label form-control-static">地址:</div>
        <div class="col-md-8 col-xs-6 form-control-static">
          {{order['addrbak']?order['addrbak']['province']:''}}{{order['addrbak']?order['addrbak']['city']:''}}{{order['addrbak']?order['addrbak']['county']:''}}{{order['addrbak']?order['addrbak']['detail']:''}}
        </div>
      </div>
    </div>
  </div>
  <div class="row fieldsetdnn">
    <div class=" col-lg-3 col-md-6 ">
      <div class="row">
        <div class="col-md-4 col-xs-6 control-label form-control-static">订单编号:</div>
        <div class="col-md-8 col-xs-6 form-control-static">
          {{order['billno']}}
        </div>
      </div>
    </div>
    <div class=" col-lg-3 col-md-6 ">
      <div class="row">
        <div class="col-md-4 col-xs-6 control-label form-control-static">制单人:</div>
        <div class="col-md-8 col-xs-6 form-control-static">
          {{order|agentuser}}
        </div>
      </div>
    </div>
    <div class=" col-lg-3 col-md-6 ">
      <div class="row">
        <div class="col-md-4 col-xs-6 control-label form-control-static">下单时间:</div>
        <div class="col-md-8 col-xs-6 form-control-static">
          {{order['cdate']}}-{{order['version']}}
        </div>
      </div>
    </div>
    <div class=" col-lg-3 col-md-6 ">
      <div class="row">
        <div class="col-md-4 col-xs-6 control-label form-control-static">订单状态:</div>
        <div class="col-md-8 col-xs-6 form-control-static">
          {{order['status'] | orderstatus:order['isonline']}}
        </div>
      </div>
    </div>
  </div>
  <div class="row fieldsetdnn">
    <div class=" col-lg-3 col-md-6 ">
      <div class="row">
        <div class="col-md-4 col-xs-6 control-label form-control-static">加工方式:</div>
        <div class="col-md-8 col-xs-6 form-control-static">
          {{order['producestatus']}}
        </div>
      </div>
    </div>
    <div class=" col-lg-3 col-md-6 ">
      <div class="row">
        <div class="col-md-4 col-xs-6 control-label form-control-static">加工费:</div>
        <div class="col-md-8 col-xs-6 form-control-static">
          {{order['producetfee']}}
        </div>
      </div>
    </div>
    <div class=" col-lg-3 col-md-6 ">
      <div class="row">
        <div class="col-md-4 col-xs-6 control-label form-control-static">包装方式:</div>
        <div class="col-md-8 col-xs-6 form-control-static">
          {{order['packtype']}}
        </div>
      </div>
    </div>
    <div class=" col-lg-3 col-md-6 ">
      <div class="row">
        <div class="col-md-4 col-xs-6 control-label form-control-static">卷内径:</div>
        <div class="col-md-8 col-xs-6 form-control-static">
          {{order['neijing']}}
        </div>
      </div>
    </div>
  </div>
  <div class="row fieldsetdnn">
    <div class=" col-lg-3 col-md-6 ">
      <div class="row">
        <div class="col-md-4 col-xs-6 control-label form-control-static">是否修边:</div>
        <div class="col-md-8 col-xs-6 form-control-static">
          {{order['isxiubian']?'是':'否'}}
        </div>
      </div>
    </div> 
    <div class=" col-lg-3 col-md-6 ">
      <div class="row">
        <div class="col-md-4 col-xs-6 control-label form-control-static">加工交期:</div>
        <div class="col-md-8 col-xs-6 form-control-static">
          {{order['jiaoqidate']}}
        </div>
      </div>
    </div>
    <div class=" col-lg-6 col-md-6 ">
      <div class="row">
        <div class="col-md-2 col-xs-6 control-label form-control-static">备注:</div>
        <div class="col-md-10 form-control-static" style="white-space: normal;">
            {{order['beizhu']}}
        </div>
      </div>
    </div>
  </div>

</div>


<ag-grid-angular [ngStyle]="{'height': (settings.bodyHeight - 480)+'px'}" #agGrid class="ag-blue wis-auto"
  [gridOptions]="gridOptions">
</ag-grid-angular>


<toaster-container></toaster-container>

<!--添加加工要求弹窗-->
<!-- <div class="modal" bsModal #jiagongModal="bs-modal" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" aria-label="Close" (click)="coles()">
          <span aria-hidden="true">&times;</span>
        </button>
        <h4 class="modal-title">添加加工要求</h4>
      </div>
      <form (ngSubmit)="addjiagong()">
        <div class="modal-body">
          <div class="panel panel-default">
            <div class="panel-body">
              <div class="form-group mb fieldsetdnn col-sm-12 col-md-6">
                <label class="col-sm-4 control-label">加工类型</label>
                <div class="col-sm-8">
                  <ng-select [allowClear]="true" name="jiagongtype" [items]="jiagongtypes" (selected)="selectetype($event)" placeholder="请选择加工类型" #defaultGroup1>
                  </ng-select>
                </div>
              </div>
              <div class="form-group mb fieldsetdnn col-sm-12 col-md-6">
                <label class="col-sm-4 control-label">加工规格</label>
                <div class="col-sm-8">
                  <input type="text" name="guige" [(ngModel)]="guige" class="form-control" placeholder="请输入加工规格"/>
                </div>
              </div>
              <div class="form-group mb fieldsetdnn col-sm-12 col-md-6">
                <label class="col-sm-4 control-label">包装方式</label>
                <div class="col-sm-8">
                  <ng-select [allowClear]="true" name="packtype" [items]="packtypes" (selected)="selectepacktype($event)" placeholder="请选择包装方式" #defaultGroup2>
                  </ng-select>
                </div>
              </div>
              <div class="form-group mb fieldsetdnn col-sm-12 col-md-6">
                <label class="col-sm-4 control-label" style="width: 36.333333%;">单包重量（吨）</label>
                <div class="col-sm-8" style="width: 63.666667%;">
                  <input type="number" name="weight" [(ngModel)]="weight" class="form-control" placeholder="请输入单包重量"/>
                </div>
              </div>
              <div class="form-group mb fieldsetdnn col-sm-12 col-md-6">
                <label class="col-sm-4 control-label">加工交期</label>
                <div class="col-sm-8">
                  <p-calendar name="jiaoqidate" [(ngModel)]="jiaoqidate" placeholder="请选择加工交期">
                  </p-calendar>
                </div>
              </div>
            </div>
            <div class="panel-body">
              <div class="form-group mb fieldsetdnn col-sm-12 col-md-12">
                <label class="col-sm-2 control-label">特殊要求</label>
                <div class="col-sm-10">
                  <input type="text" name="special" [(ngModel)]="jiagongyaoqiu['special']" class="form-control" placeholder="请输入特殊要求"/>
                </div>
              </div>
            </div>
          </div>
          <div class="form-inline text-center">
            <button type="submit" class="btn btn-primary btn-large">添加</button>
          </div>
        </div>
      </form>
    </div>
  </div>
</div> -->



<!--  选择模板的弹窗 -->
<div class="modal" bsModal #ordermodalchange="bs-modal" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel"
aria-hidden="true">
  <div class="modal-dialog modal-xs">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" aria-label="Close" (click)="hideordermodalchange()">
          <span aria-hidden="true">&times;</span>
        </button>
        <h4 class="modal-title">模板选择</h4>
      </div>
      <div class="modal-body">
        <div class="panel panel-default">
          <div class="panel-body">
            <div class="col-sm-9">
              <p-dropdown [options]="ordermodal" placeholder="选择模板" [(ngModel)]="changeordermodal['ordermodal']"  [style]="{'width': '100%'}">
              </p-dropdown>
            </div>
            <div class="form-inline text-center">
              <button type="button" (click)="reload()" class="btn btn-primary btn-large">确定打印</button>
            </div>
       <!--      <div class="row fieldsetdnn">
              &emsp;&emsp;&emsp;&emsp;&emsp;
              <button  type="button" (click)="makepdf()" class="btn btn-info btn-large">默认模板</button>
              &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
              <button  type="button"  (click)="makepdf()" class=" btn btn-info btn-large">老模板</button>              
            </div> -->
          </div>
        </div>
      </div>
    </div> 
  </div>